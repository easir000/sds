{% extends 'layout/dashboard.html' %}
{% load static %}
{% block body %}
   <!-- Content -->
   <div class="container-fluid flex-grow-1 container-p-y">
      <!-- Layout Demo -->
      <div class="layout-demo-wrapper">
         <div class="row">
            <div class="col-lg-1"></div>
            <div class="col-lg-10">
               <!-- Add this section to display the error message -->
                     {% if error %}
                     <div class="alert alert-danger" role="alert">
                        {{ error }}
                     </div>
                     {% endif %}
               <h2 class="mb-3">ðŸ›¹ Turn a product description into ad copy. ðŸ›¹</h2>
               <form class="" action="#" method="post">
                  {% csrf_token %}
                  <div class="mb-3">
                     <label for="product_name" class="form-label">Product Name:</label>
                     <input type="text" id="product_name" name="product_name" class="form-control" placeholder="e.g. a sales email,a personal bio, etc"  maxlength="300" required>
        <span id="charCount" class="text-muted">0/300 characters</span> <!-- Display character count -->

                  </div>
                  <div class="mb-3">
                     <label for="product_description" class="form-label">Product Description:</label>
                     <textarea id="product_description" name="product_description" class="form-control" placeholder="[product details]" rows="3" spellcheck="false" maxlength="300" required></textarea>
        <span id="charCount" class="text-muted">0/300 characters</span> <!-- Display character count -->
                  
                  </div>
                  <div class="mb-3">
                     <label for="unique_feature" class="form-label">Unique Feature:</label>
                     <input type="text" id="unique_feature" name="unique_feature" class="form-control" maxlength="300" required>
        <span id="charCount" class="text-muted">0/300 characters</span> <!-- Display character count -->

                  </div>
                  <div class="mb-3">
                     <label for="audience" class="form-label">Target Audience:</label>
                     <input type="text" id="audience" name="audience" class="form-control" maxlength="300" required>
        <span id="charCount" class="text-muted">0/300 characters</span> <!-- Display character count -->

                  </div>
                  <div class="mb-3">
                     <label for="tone_of_voice" class="form-label">Tone of Voice:</label>
                     <input type="text" id="tone_of_voice" name="tone_of_voice" class="form-control" maxlength="300" required>
        <span id="charCount" class="text-muted">0/300 characters</span> <!-- Display character count -->

                 </div>
                  <div class="mb-3">
                     <label for="target_language">Select target language:</label><br>


                           <select   name="target_language" class="form-select" aria-label="Floating label select example"id="prompt">
                        <option value="en">English</option>
                        <option value="fr">French</option>
                        <option value="BD">Bangladesh</option>


                        <!-- ... other options ... -->
                    </select>
                 </div>
                  <div class="mb-3">
                     <label for="keywords" class="form-label">Keywords:</label>
                     <input type="text" id="keywords" name="keywords" class="form-control"  maxlength="300"required>
        <span id="charCount" class="text-muted">0/300 characters</span> <!-- Display character count -->

                  </div>
                  <div class="mb-3">
                     <label for="domain" class="form-label">Domain:</label>
                     <input type="text" id="domain" name="domain" class="form-control" required pattern="^(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]$"
                         title="Please enter a valid domain name (e.g., example.com)">
                 </div>
                  <div class="mb-3">
                     <label for="intent" class="form-label">Intent:</label>
                     <input type="text" id="intent" name="intent" class="form-control"  maxlength="300"required>
        <span id="charCount" class="text-muted">0/300 characters</span> <!-- Display character count -->

                  </div>
                  <div class="mb-3">
                     <button class="btn btn-success fw-bold" type="submit">Generate Advertisement</button>
                  </div>
               </form>
            </div>
            <div class="col-lg-1"></div>
         </div>
         {% if advertisement %}
         <div class="row">
            <div class="col-lg-1"></div>
            <div class="col-lg-10">
               <h2 class="mb-3">Generated Advertisement</h2>
               <p>{{ advertisement }}</p>
            </div>
            <div class="col-lg-1"></div>
         </div>
         {% endif %}
      </div>
   </div>




   <script>
      document.addEventListener('DOMContentLoaded', () => {
         const inputFields = document.querySelectorAll('input[maxlength="300"], textarea[maxlength="300"]');
         
         inputFields.forEach(inputField => {
            const charCount = inputField.parentElement.querySelector('.text-muted');
            
            inputField.addEventListener('input', () => {
               const currentCount = inputField.value.length;
               charCount.textContent = `${currentCount}/300 characters`;
            });
         });
      });
   </script>
   
{% endblock %}


